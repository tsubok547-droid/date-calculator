lib/
├── main.dart             # アプリの起動（エントリーポイント）
│
├── app.dart              # MaterialAppの定義とテーマ設定
│
├── services/
│   ├── calendar_service.dart # 予定表にスケジュール追加
│   ├── messenger_service.dart # SnackBar表示を管理するクラス
│   ├── history_service.dart # 履歴リストのインポート・エクスポートを管理するクラス
│   └── settings_service.dart # SharedPreferencesを管理するクラス
│
├── providers/
│   ├── calculator_provider.dart  # 計算ロジック担当
│   ├── calculator_provider.g.dart  # 自動生成ファイル
│   ├── history_provider.dart         # 【新規】履歴の状態管理担当
│   ├── history_provider.g.dart       # 【新規】自動生成ファイル
│   ├── history_filter_provider.dart  # 履歴フィルタ担当
│   ├── history_filter_provider.g.dart  # 自動生成ファイル
│   ├── repositories_provider.dart  # 【新規】RepositoryをDIするためのProvider
│   └── services_provider.dart    # SettingsServiceをアプリ内で利用可能にする
│
├── models/
│   ├── calculation_state.dart # CalculationStateモデルクラス
│   ├── history_duplicate_policy.dart # 履歴削除基準モデルクラス
│   └── history_filter_state.dart # 履歴フィルタモデルクラス
│
├── screens/
│   ├── calculator_page.dart  # 計算機ページのUIとロジック
│   ├── settings_page.dart    # 設定ページのUIとロジック
│   └── history_page.dart     # 履歴ページのUIとロジック
│
├── widgets/
│   └── calculator/
│   │    └──  action_buttons.dart  # アクションボタン
│   │    └──  calculator_app_bar.dart # メニューバー
│   │    └──  comment_display.dart # コメント枠
│   │    └──  display_fields.dart  # 計算結果表示フィールド
│   ├── settings/
│   │   ├── history_settings_section.dart
│   │   ├── integration_settings_section.dart
│   │   ├── shortcut_settings_section.dart
│   │   └── theme_settings_section.dart
│   └── history/
│   │    └──  history_filter_dialog.dart  # 履歴フィルタダイアログ
│   ├── keypad.dart           # 電卓のキーパッドウィジェット
│   └── comment_edit_dialog.dart #コメント編集ウィジェット
│
└── utils/
    ├── constants.dart        # 定数（SharedPreferencesのキーなど）
    ├── date_formatter.dart       # 日付のフォーマット関数
    └── string_sanitizer.dart     # 文字列の無害化ユーティリティ
